<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bantuan Tunai PLN - Klaim Hadiah (Demo)</title>
  <style>
    :root{
      --sky:#1fb6ff;
      --teal:#11806a;
      --accent:#25a4d6;
      --bg:#f3f5f7;
      --card:#eef0f4;
      --text:#111827;
      --muted:#6b7280;
      --success:#22c55e;
      --danger:#ef4444;
      --rounded:14px;
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--text);background:#fff;}
    header{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 24px;
      border-bottom:6px solid var(--bg);
      background:linear-gradient(90deg, transparent 0%, transparent 100%);
    }
    .brand{
      display:flex;align-items:center;gap:12px;
    }
    .logo{
      width:56px;height:40px;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,#ffeb3b,#ffd54a);
      border-radius:6px;padding:4px;box-shadow:0 1px 0 rgba(0,0,0,0.05);
    }
    .brand h1{margin:0;font-size:18px;color:#0ea5a5;letter-spacing:1px}
    .date{
      color:var(--muted);font-weight:600;
    }

    main{max-width:980px;margin:28px auto;padding:0 18px}
    .center{
      text-align:center;margin-bottom:18px;
    }
    .title{color:#e11d48;font-size:34px;font-weight:800;margin:8px 0;}
    .money-illustration{margin:10px auto;width:220px;height:140px;display:block}

    .info{
      background:var(--card);padding:18px;border-radius:14px;border:1px solid rgba(0,0,0,0.03);
      box-shadow:0 4px 12px rgba(8,15,30,0.03);
      margin-top:18px;
    }
    .info p{margin:0 0 12px 0;color:var(--muted)}
    .steps{margin:8px 0 16px 0;padding-left:16px;color:var(--text)}

    /* Share button */
    .share-row{display:flex;gap:12px;flex-direction:column;align-items:center}
    .btn-share{
      display:inline-flex;align-items:center;gap:10px;
      background:var(--teal);color:white;padding:12px 18px;border-radius:8px;border:none;
      cursor:pointer;font-weight:700;width:100%;max-width:820px;justify-content:center;
      box-shadow:0 6px 0 rgba(0,0,0,0.08), inset 0 -3px rgba(0,0,0,0.05);
    }
    .btn-share:active{transform:translateY(1px)}
    .share-hint{margin-top:10px;color:var(--muted);font-weight:600}

    /* progress */
    .progress-wrap{width:100%;margin-top:20px}
    .progress-bg{background:rgba(0,0,0,0.05);height:34px;border-radius:18px;padding:4px}
    .progress-bar{
      height:26px;border-radius:14px;display:flex;align-items:center;justify-content:center;
      font-weight:700;background:repeating-linear-gradient( -45deg, rgba(0,0,0,0.12) 0 18px, rgba(255,255,255,0.02) 18px 36px );
      transition:width 400ms ease;
      background-color:#0ea5a5;color:white;box-shadow:0 2px 8px rgba(0,0,0,0.08);
    }

    .continue-wrap{display:flex;justify-content:center;margin-top:18px}
    .btn-continue{
      background:var(--accent);color:white;padding:14px 26px;border-radius:12px;border:3px solid rgba(0,0,0,0.1);
      font-size:20px;font-weight:700;cursor:pointer;width:100%;max-width:820px;
    }
    .btn-continue[disabled]{opacity:0.45;cursor:not-allowed;filter:grayscale(0.1)}

    /* small share icons row */
    .icons-row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .icon-btn{
      padding:10px 12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);
      background:white;cursor:pointer;font-weight:700;min-width:120px;text-align:center;
    }

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:white;padding:18px;border-radius:12px;max-width:520px;width:94%;box-shadow:0 18px 40px rgba(2,6,23,0.35)}
    .modal h3{margin-top:0}
    .form-row{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .form-row input{padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08)}
    .modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    .btn{padding:10px 12px;border-radius:8px;border:none;cursor:pointer}
    .btn-primary{background:var(--teal);color:white;font-weight:700}
    .btn-ghost{background:#f3f4f6}

    /* responsive */
    @media (max-width:640px){
      .title{font-size:28px}
      .money-illustration{width:180px;height:120px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand" aria-hidden="false">
      <div class="logo" role="img" aria-label="Logo PLN">
        <!-- Simple PLN-like SVG badge -->
        <svg width="40" height="28" viewBox="0 0 40 28" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect width="40" height="28" rx="4" fill="#ffeb3b"/>
          <path d="M4 5 L20 5 L12 23 L28 3" stroke="#0ea5a5" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1>Bantuan Tunai PLN</h1>
    </div>
    <div class="date" id="currentDate" aria-live="polite"></div>
  </header>

  <main>
    <section class="center" aria-labelledby="title-main">
      <h2 id="title-main" class="title">Selamat!</h2>

      <!-- Simple SVG to represent stacked money -->
      <svg class="money-illustration" viewBox="0 0 200 120" role="img" aria-label="Ilustrasi uang">
        <defs>
          <linearGradient id="g1" x1="0" x2="1">
            <stop offset="0" stop-color="#ff9aa2"/>
            <stop offset="1" stop-color="#ffb7b2"/>
          </linearGradient>
        </defs>
        <!-- stacked rectangles -->
        <g transform="translate(10,12)">
          <rect x="0" y="40" width="160" height="64" rx="8" fill="#ffd"/>
          <g>
            <rect x="0" y="36" width="160" height="62" rx="8" fill="url(#g1)" opacity="0.98"/>
            <rect x="-6" y="24" width="160" height="62" rx="8" fill="#ffd1a9" opacity="0.9"/>
            <rect x="-12" y="12" width="160" height="62" rx="8" fill="#f6b7ff" opacity="0.85"/>
            <rect x="-18" y="0" width="160" height="62" rx="8" fill="#ffd54a" opacity="0.8"/>
          </g>
          <text x="10" y="78" font-weight="700" font-size="16" fill="#5b3b3b">Rp 1.500.000,00</text>
        </g>
      </svg>

      <p style="color:var(--muted);margin-top:6px">Hadiah Anda adalah: <strong>Rp 1.500.000,00</strong> Ikuti petunjuk di halaman berikutnya untuk mengklaim hadiah Anda!</p>
    </section>

    <section class="info" aria-labelledby="instruksi">
      <p id="instruksi"><strong>Instruksi singkat:</strong></p>
      <ol class="steps">
        <li>Bagikan ke 5 grup atau 20 teman di aplikasi berikut (klik tombol yang sesuai di bawah).</li>
        <li>Setelah progress penuh, klik "Melanjutkan" dan klaim hadiah Anda.</li>
      </ol>

      <div class="share-row" role="region" aria-label="Area berbagi">
        <button class="btn-share" id="whatsappShare" aria-label="Bagikan via WhatsApp (menambah progress)">
          <!-- WhatsApp icon (simple) -->
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="#fff" d="M20.5 3.5A11 11 0 1 0 12 23a11 11 0 0 0 8.5-19.5zm-4.4 12.9c-.4.9-2.4 1.8-3.3 2-1 .2-1.6.2-3.1-.2-2-.6-3.4-2-4-4-.4-1-.3-1.6.1-2.8.5-1.6 1.1-2.2 1.9-2.1.6.1 1 .3 1.7.6.5.2 1 .3 1.4.2.5-.1.9-.6 1.4-1.1.5-.5.9-1 1.4-.8.5.1.8.7.9 1.2.1.6.1 1 .1 1.6 0 .6.2 1 .3 1.5.2.7.1 1.6-.4 2.5z"/></svg>
          WhatsApp
        </button>

        <div style="width:100%;max-width:820px;">
          <div class="icons-row" role="toolbar" aria-label="Pilihan berbagi lain">
            <button class="icon-btn" data-service="telegram">Telegram</button>
            <button class="icon-btn" data-service="facebook">Facebook</button>
            <button class="icon-btn" data-service="messenger">Messenger</button>
            <button class="icon-btn" data-service="copy">Salin Tautan</button>
            <button class="icon-btn" data-service="email">Email</button>
          </div>

          <div class="progress-wrap" aria-hidden="false" aria-label="Progress berbagi">
            <div style="margin-top:12px;font-weight:700;text-align:center;color:var(--muted)">Bagikan sampai bilah biru penuh!</div>
            <div style="height:10px"></div>
            <div class="progress-bg" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70" id="progressBg">
              <div class="progress-bar" id="progressBar" style="width:70%">70%</div>
            </div>
          </div>

          <div class="continue-wrap">
            <button class="btn-continue" id="continueBtn" disabled aria-disabled="true">Melanjutkan</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal klaim -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Klaim Hadiah Anda</h3>
      <p style="color:var(--muted)">Isi data di bawah untuk proses klaim (demo: hanya simulasi).</p>
      <form id="claimForm" class="form-row">
        <label>
          Nama lengkap
          <input type="text" id="fullname" name="fullname" autocomplete="name" required aria-required="true" />
        </label>
        <label>
          Nomor HP (WhatsApp)
          <input type="tel" id="phone" name="phone" autocomplete="tel" placeholder="62812xxxx..." required aria-required="true" />
        </label>
        <label>
          Alamat Email (opsional)
          <input type="email" id="email" name="email" autocomplete="email" />
        </label>

        <div class="actions">
          <button type="button" class="btn btn-ghost" id="cancelModal">Batal</button>
          <button type="submit" class="btn btn-primary">Kirim Klaim</button>
        </div>
      </form>
      <div id="formResult" style="display:none;margin-top:12px"></div>
    </div>
  </div>

  <script>
    // --- Init date ---
    (function setDate(){
      const dEl = document.getElementById('currentDate');
      const now = new Date();
      const y = now.getFullYear(), m = String(now.getMonth()+1).padStart(2,'0'), day = String(now.getDate()).padStart(2,'0');
      dEl.textContent = `${y}/${m}/${day}`;
    })();

    // --- Progress logic ---
    const progressBar = document.getElementById('progressBar');
    const continueBtn = document.getElementById('continueBtn');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const claimForm = document.getElementById('claimForm');
    const formResult = document.getElementById('formResult');

    // start at 70% as in screenshot
    let progress = 70;
    function setProgress(value){
      progress = Math.max(0, Math.min(100, value));
      progressBar.style.width = progress + '%';
      progressBar.textContent = progress + '%';
      progressBar.parentElement.setAttribute('aria-valuenow', String(progress));
      // enable continue button at 100%
      if(progress >= 100){
        continueBtn.disabled = false;
        continueBtn.setAttribute('aria-disabled','false');
      } else {
        continueBtn.disabled = true;
        continueBtn.setAttribute('aria-disabled','true');
      }
    }
    setProgress(progress);

    // Shared message and dummy link
    const shareMessage = encodeURIComponent("Saya mendapat info tentang Bantuan Tunai PLN senilai Rp 1.500.000, cek di sini (demo).");
    const shareUrl = encodeURIComponent(location.href);

    // Simulate share action: each share increments by x%
    function handleShare(increment = 10, method = ''){
      // increment logic: smaller increments so user needs multiple clicks (simulate 5 group shares)
      const inc = increment;
      setProgress(progress + inc);
      // For copy, actually copy text to clipboard
      if(method === 'copy'){
        const txt = decodeURIComponent(shareMessage) + " " + decodeURIComponent(shareUrl);
        navigator.clipboard?.writeText(txt).then(()=>{
          alert('Tautan disalin ke clipboard (demo).');
        }).catch(()=>{ alert('Salin gagal â€” gunakan Ctrl+C');});
      }
    }

    // WhatsApp button opens share link and increases progress
    document.getElementById('whatsappShare').addEventListener('click', function(e){
      e.preventDefault();
      // open WhatsApp share in new tab
      const waUrl = `https://wa.me/?text=${shareMessage}%20${shareUrl}`;
      window.open(waUrl, '_blank');
      handleShare(10, 'whatsapp');
    });

    // other icons
    document.querySelectorAll('.icon-btn').forEach(btn=>{
      btn.addEventListener('click', function(){
        const service = this.dataset.service;
        // choose behavior by service
        if(service === 'telegram'){
          window.open(`https://t.me/share/url?url=${shareUrl}&text=${shareMessage}`, '_blank');
          handleShare(12, 'telegram');
        } else if(service === 'facebook'){
          window.open(`https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`, '_blank');
          handleShare(8, 'facebook');
        } else if(service === 'messenger'){
          // messenger sharing (web)
          window.open(`fb-messenger://share/?link=${shareUrl}`, '_blank');
          handleShare(8, 'messenger');
        } else if(service === 'copy'){
          handleShare(0, 'copy'); // copy doesn't increase progress automatically
        } else if(service === 'email'){
          window.open(`mailto:?subject=Info Bantuan Tunai&body=${shareMessage}%20${shareUrl}`, '_blank');
          handleShare(6, 'email');
        } else {
          handleShare(5);
        }
      });
    });

    // Continue button => open modal when progress >= 100
    continueBtn.addEventListener('click', function(){
      if(progress < 100) return;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden','false');
      // focus first input
      setTimeout(()=>document.getElementById('fullname').focus(), 100);
    });

    // Cancel modal
    document.getElementById('cancelModal').addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', function(e){
      if(e.target === modalBackdrop) closeModal();
    });
    function closeModal(){
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden','true');
      formResult.style.display = 'none';
      claimForm.style.display = 'block';
      claimForm.reset();
    }

    // Form submit (simulated)
    claimForm.addEventListener('submit', function(e){
      e.preventDefault();
      const name = document.getElementById('fullname').value.trim();
      const phone = document.getElementById('phone').value.trim();
      if(!name || !phone){
        alert('Isi nama dan nomor HP terlebih dahulu.');
        return;
      }
      // Simulate sending and show success
      claimForm.style.display = 'none';
      formResult.style.display = 'block';
      formResult.innerHTML = `<div style="padding:12px;border-radius:8px;background:#ecfdf5;border:1px solid #bbf7d0;color:#065f46">
        Terima kasih <strong>${escapeHtml(name)}</strong>! Klaim sementara tercatat (demo). Kami akan menghubungi <strong>${escapeHtml(phone)}</strong>.
      </div>`;
      // Optionally reset progress or lock UI - here we keep modal open
    });

    // Utility: escape HTML to avoid injection in demo text
    function escapeHtml(str){
      return str.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]);});
    }

    // Keyboard accessibility: close modal with Esc
    document.addEventListener('keydown', function(e){
      if(e.key === 'Escape' && modalBackdrop.style.display === 'flex') closeModal();
    });

    // Optional: allow developer to preset progress via URL param ?progress=90
    (function applyUrlProgress(){
      try{
        const params = new URLSearchParams(location.search);
        const p = parseInt(params.get('progress') || '', 10);
        if(!isNaN(p)) setProgress(p);
      }catch(e){}
    })();
  </script>
</body>
</html>
